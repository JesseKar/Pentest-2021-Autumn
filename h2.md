# h2

## z) Lue ja tiivistä. Tässä z-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen ja tiivistelmä riittää). Tiivistämiseen riittää muutama ranskalainen viiva.

### Tunkeutumistestaus Metasploitilla ([Jaswal 2020: Mastering Metasploit](https://learning.oreilly.com/library/view/mastering-metasploit/9781838980078/B15076_01_Final_ASB_ePub.xhtml#_idParaDest-30))
- Exploitit on ovat koodia, jotka suoritettaessa hyödyntää kohteen haavoittuvuutta
- Payload suoritetaan kohteessa hyödyntämisen jälkeen, eli määrittää kohdejärjestelmässä suoritettavat toimet
- Encodereitä jotka peittää omia jälkiä ja paljoin muita (Auxiliary) työkaluja moneen tarpeeseen
    - use [Auxiliary/Exploit/Payload/Encoder/Evasion]: esim. use exploit/unix/ftp/vsftpd_234_backdoor
    - show [exploits/playloads/etc..] esim. show payloads
    - set [options/payload] esim. set RPORT 8080
    - run, suorittaa auxiliaryt asetusten settaamisen jälkeen
    - exploit, suorittaa exploitin
    - info, search, check, sessions, back
- Meterpreter on payloadi, joka hyödyntää DDL-injektiovaiheita ja tarjoaa valmiita toimintoja joita voidaan suorittaa kohtejärjestelmässä
    - Yleisiä komentoja: sysinfo, ifconfig, arp, background, shell, getuid, getsystem, getpid, ps
- Metasploit tukee laajojen kohteiden tutkimista
- Helppo vaihtaa ja asettaa eri payloadeja
- Mahdollistaa siistit exitit kohteesta ja paljon post-exploitation komentoja
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 
- 

## a) SELECT * FROM student. Ratkaise SQLZoo:sta: 0 SELECT basics, 1 SELECT name, 2 SELECT from World.

## b) Nyrkkeilysäkki. Asenna Metasploitable 2 samaan verkkoon Kalin kanssa. Katso, ettei haavoittuva Metasploitable 2 näy Internetiin.

## c) Nauhalle. Nauhoita kaikki konsolissa annetut asiat ja näkyvät tulosteet koko tehtävästä. (esim script)

## d) Ei kuulu! Ennenkuin aloitat skannaukset, kokeile, ettei Kali pääse nettiin 'ping 8.8.8.8' vastaa "Network is unreachable".

## e) Piilosilla. Etsi Metasploitable 2 verkkoskannauksella. Tarkista ensin, että osoitteet ovat uskottavia (ipcalc 10.0.0.1/23). Sitten ping sweep (nmap -sn). Analysoi tulokset, eli selitä, mitä mikäkin asia tulosteessa tarkoittaa. Mitä päättelet eri koneista?

## f) Kilo. Porttiskannaa 1000 tavallisinta porttia löydetyistä koneista. Selitä ja analysoi tulokset. Mikä koneista voisi olla Metasploitable 2?

## g) Ja tiskiallas. Porttiskannaa Metasploitable 2 perusteellisesti. Selitä ja analysoi tulokset. Selitä kustakin avoimesta portista, mikä palvelu siinä on / mihin se on tarkoitettu, onko se tavallisesti näkyvissä Internetiin ja onko se nykyiaikainen. Voit myös arvioida, onko versio päivitetty.

## h) Sataa simpukoita. Tunkeudu vsftpd-palveluun.

## i) Ovi jäi auki. Mitä löytyy portista 1524/tcp? Kokeile netcattilla 'nc'.

## j) Darn Low Security. Etsi Metasploitable 2 weppipalvelin. Tee paikallinen tunnus DVWA Damn Vulnerable Web App -ohjelmaan. Aseta vasemman reunan palkista "DVWA Security" Low.

## k) Execute! Ratkaise DVWA "Command Excution". ("DVWA Security" on paras olla "Low")

## l) Asenna jokin kone Vulnhub:ista samaan Internetistä eristettyyn verkkoon Kalin kanssa.

## m) Skannaa Vulnhubista hakemasi kone, ja analysoi tulokset.

n) Vapaaehtoinen: Murtaudu jollain uudella tavalla Metasploitable 2:n.

o) Vapaaehtoinen: Murtaudu Vulnhubista lataamaasi kuvaan.

p) Vapaaehtoinen: Jos viime kerran SQL injektiot jäivät mysteeriksi, voit tehdä ne nyt suuremmalla ymmärykselllä

q) Vapaaehtoinen: Jatka HackTheBoxin parissa.

r) Vapaaehtoinen: Tee lisää tehtäviä DVWA:sta.

s) Vapaaehtoinen: Tee lisää tehtäviä WebGoatista.

t) Vapaaehtoinen: Tee lisää tehtäviä Over the Wiresta.

Lähteet
- [Kurssisivu, Tero Karvinen](https://terokarvinen.com/2021/penetration-testing-course-2021-autumn/#h2-turbo-boosted)
- [Jaswal 2020: Mastering Metasploit](https://learning.oreilly.com/library/view/mastering-metasploit/9781838980078/B15076_01_Final_ASB_ePub.xhtml#_idParaDest-30)
- 